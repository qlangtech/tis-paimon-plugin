## partition

Apache Paimon 的分区功能是其表设计中的核心特性之一，它通过**逻辑划分**数据来提高查询效率和管理便捷性。以下是分区功能的全面介绍：

一、分区核心概念

 1. 什么是分区？
    - **逻辑数据划分**：根据指定列的值将表数据分割成独立的子集
    - **物理存储映射**：每个分区对应文件系统上的独立目录
    - **查询优化基础**：实现分区剪枝（Partition Pruning）加速查询

 2. 分区 vs 分桶
    
    | **特性**       | **分区（Partition）**               | **分桶（Bucket）**               |
    |----------------|-----------------------------------|---------------------------------|
    | **目的**       | 数据管理/查询优化                 | 并行处理/文件控制              |
    | **划分依据**   | 业务逻辑（日期、地区等）          | 哈希算法（主键/指定列）        |
    | **物理表现**   | 独立目录                          | 同一目录下的不同文件           |
    | **查询优化**   | 分区剪枝                          | 桶过滤                         |
    | **典型场景**   | 时间序列数据                      | 分布式处理                     |

## sequenceField

在 Apache Paimon 中配置 **Sequence ID** 主要用于处理多路写入（如 CDC 数据）时的更新顺序问题，确保在相同主键下保留最新版本的数据。以下是详细配置步骤和注意事项：

核心概念
- **Sequence ID**：一个**单调递增的字段**（如时间戳、版本号），用于解决更新冲突。当主键相同时，Paimon 会保留 Sequence ID 值最大的记录。
- **使用场景**：适用于 CDC 数据同步（如 MySQL binlog）、多流写入等需要保证数据最终一致性的场景。

## bucketField

在 Apache Paimon 中，bucket-key 是一个关键的分桶字段配置，它决定了数据在桶内的分布方式。这个参数与 bucket 模式密切相关，但在不同桶模式下其作用和有效性有显著差异。下面我将详细解释：

🔄 `bucket-key` 在不同桶模式下的有效性
1. **固定桶模式 (`bucket > 0`)** - ✅ **完全有效且推荐使用**
2. **动态桶模式 (`bucket = -1`)** ⚠️ **有条件有效**
   限制：
   - 仅当 **`bucket-key` = 主键（或主键子集）** 时才有效
   - 如果设置非主键字段，Paimon 会**静默忽略**该配置
3. **延迟桶模式 (`bucket = -2`)** ❌ **完全无效**
   原因：
   - 延迟桶模式写入时**不立即分桶**
   - 数据以临时文件存储，Compaction 时才分桶
   - `bucket-key` 在写入阶段无法生效

💡 最佳实践总结

| **桶模式**      | `bucket-key` 是否有效 | 推荐配置策略                          |
|----------------|---------------------|---------------------------------------|
| **固定桶 (>0)**  | ✅ 有效              | 设置为高频过滤/JOIN的字段              |
| **动态桶 (-1)**  | ⚠️ 仅当等于主键时有效 | 必须设置为表的主键字段                  |
| **延迟桶 (-2)**  | ❌ 无效              | 改用 `partition` + `sort-key` 替代方案 |
